<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover" />
    <title>Tecentrix - Linux Administration Training</title>
    <meta name="description" content="Expert-led Linux administration training to advance your IT career. Master server management, security, and networking skills with hands-on courses." />
    <meta name="author" content="Tecentrix" />
    
    <!-- Force no caching to prevent mobile/desktop inconsistency -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.tecentrix.com/" />
    <meta property="og:title" content="Tecentrix - Linux Administration Training" />
    <meta property="og:description" content="Expert-led Linux administration training to advance your IT career. Master server management, security, and networking skills with hands-on courses." />
    <meta property="og:image" content="/og-image.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://www.tecentrix.com/" />
    <meta property="twitter:title" content="Tecentrix - Linux Administration Training" />
    <meta property="twitter:description" content="Expert-led Linux administration training to advance your IT career. Master server management, security, and networking skills with hands-on courses." />
    <meta property="twitter:image" content="/og-image.png" />

    <!-- iOS specific -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no" />

    <!-- Mobile web app related -->
    <meta name="application-name" content="Tecentrix" />
    <meta name="theme-color" content="#3b82f6" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />

    <link rel="icon" type="image/png" href="/lovable-uploads/41bbf379-ac88-47c1-a794-42fbc6734c17.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <body>
    <div id="root"></div>
    <script>
      // More aggressive script to maintain consistency between mobile/desktop
      document.addEventListener('DOMContentLoaded', function() {
        // Force settings sync on page load with retry logic
        function syncSettings() {
          try {
            // Update page title based on company name from settings
            const settingsData = localStorage.getItem('tecentrix-settings');
            if (settingsData) {
              const settings = JSON.parse(settingsData);
              if (settings && settings.state && settings.state.settings && settings.state.settings.companyName) {
                document.title = settings.state.settings.companyName + ' - Linux Administration Training';
                document.documentElement.dataset.companyName = settings.state.settings.companyName;
                
                // Force layout recalculation
                document.body.style.display = 'none';
                setTimeout(() => {
                  document.body.style.display = '';
                }, 0);
                
                return true;
              }
            }
            return false;
          } catch (e) {
            console.error('Error updating from storage:', e);
            return false;
          }
        }
        
        // Try syncing immediately
        if (!syncSettings()) {
          // If initial sync fails, retry with increasing delays
          [100, 500, 1000, 2000].forEach(delay => {
            setTimeout(syncSettings, delay);
          });
        }
        
        // Listen for storage events to keep all tabs/windows in sync
        window.addEventListener('storage', function(event) {
          if (event.key === 'tecentrix-settings' || event.key === null || event.key === 'company-name-updated') {
            console.log('Settings updated in another tab/window. Syncing...');
            syncSettings();
            
            // Force refresh of content by emitting a custom event
            window.dispatchEvent(new CustomEvent('settings-sync'));
          }
        });
        
        // Create mutation observer to watch for company name changes and force updates
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'data-company-name') {
              document.title = document.documentElement.dataset.companyName + ' - Linux Administration Training';
            }
          });
        });
        
        // Start observing document element for attribute changes
        observer.observe(document.documentElement, { attributes: true });
        
        // Add periodic check for consistency
        setInterval(syncSettings, 5000);
        
        // Clear any service worker caches to ensure fresh content
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for (let registration of registrations) {
              registration.unregister();
            }
          });
        }
        
        // Disable browser caching
        if (typeof window.fetch === 'function') {
          const originalFetch = window.fetch;
          window.fetch = function(url, options) {
            options = options || {};
            options.cache = 'no-store';
            options.headers = options.headers || {};
            options.headers['Pragma'] = 'no-cache';
            return originalFetch(url, options);
          };
        }
      });
    </script>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
